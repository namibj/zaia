---
source: src/parser/mod.rs
assertion_line: 904
expression: syntax_tree

---
SyntaxTree {
    block: [
        Declare(
            Declare {
                declarations: [
                    Declaration {
                        name: Ident {
                            name: "anim_mt",
                        },
                        is_const: false,
                        has_finalizer: false,
                    },
                ],
                assign: Some(
                    Assign {
                        target: [
                            Ident(
                                Ident {
                                    name: "anim_mt",
                                },
                            ),
                        ],
                        value: [
                            Table(
                                Table {
                                    elements: [],
                                },
                            ),
                        ],
                    },
                ),
            },
        ),
        Assign(
            Assign {
                target: [
                    Property(
                        Ident(
                            Ident {
                                name: "anim_mt",
                            },
                        ),
                        Ident(
                            Ident {
                                name: "__index",
                            },
                        ),
                    ),
                ],
                value: [
                    Ident(
                        Ident {
                            name: "anim_mt",
                        },
                    ),
                ],
            },
        ),
        Assign(
            Assign {
                target: [
                    Ident(
                        Ident {
                            name: "newAnimation",
                        },
                    ),
                ],
                value: [
                    Function(
                        Function {
                            args: [
                                Ident {
                                    name: "image",
                                },
                                Ident {
                                    name: "fw",
                                },
                                Ident {
                                    name: "fh",
                                },
                                Ident {
                                    name: "delay",
                                },
                                Ident {
                                    name: "frames",
                                },
                            ],
                            vararg: false,
                            block: [
                                Declare(
                                    Declare {
                                        declarations: [
                                            Declaration {
                                                name: Ident {
                                                    name: "a",
                                                },
                                                is_const: false,
                                                has_finalizer: false,
                                            },
                                        ],
                                        assign: Some(
                                            Assign {
                                                target: [
                                                    Ident(
                                                        Ident {
                                                            name: "a",
                                                        },
                                                    ),
                                                ],
                                                value: [
                                                    Table(
                                                        Table {
                                                            elements: [],
                                                        },
                                                    ),
                                                ],
                                            },
                                        ),
                                    },
                                ),
                                Assign(
                                    Assign {
                                        target: [
                                            Property(
                                                Ident(
                                                    Ident {
                                                        name: "a",
                                                    },
                                                ),
                                                Ident(
                                                    Ident {
                                                        name: "img",
                                                    },
                                                ),
                                            ),
                                        ],
                                        value: [
                                            Ident(
                                                Ident {
                                                    name: "image",
                                                },
                                            ),
                                        ],
                                    },
                                ),
                                Assign(
                                    Assign {
                                        target: [
                                            Property(
                                                Ident(
                                                    Ident {
                                                        name: "a",
                                                    },
                                                ),
                                                Ident(
                                                    Ident {
                                                        name: "frames",
                                                    },
                                                ),
                                            ),
                                        ],
                                        value: [
                                            Table(
                                                Table {
                                                    elements: [],
                                                },
                                            ),
                                        ],
                                    },
                                ),
                                Assign(
                                    Assign {
                                        target: [
                                            Property(
                                                Ident(
                                                    Ident {
                                                        name: "a",
                                                    },
                                                ),
                                                Ident(
                                                    Ident {
                                                        name: "delays",
                                                    },
                                                ),
                                            ),
                                        ],
                                        value: [
                                            Table(
                                                Table {
                                                    elements: [],
                                                },
                                            ),
                                        ],
                                    },
                                ),
                                Assign(
                                    Assign {
                                        target: [
                                            Property(
                                                Ident(
                                                    Ident {
                                                        name: "a",
                                                    },
                                                ),
                                                Ident(
                                                    Ident {
                                                        name: "timer",
                                                    },
                                                ),
                                            ),
                                        ],
                                        value: [
                                            Literal(
                                                Num(
                                                    Int(
                                                        0,
                                                    ),
                                                ),
                                            ),
                                        ],
                                    },
                                ),
                                Assign(
                                    Assign {
                                        target: [
                                            Property(
                                                Ident(
                                                    Ident {
                                                        name: "a",
                                                    },
                                                ),
                                                Ident(
                                                    Ident {
                                                        name: "position",
                                                    },
                                                ),
                                            ),
                                        ],
                                        value: [
                                            Literal(
                                                Num(
                                                    Int(
                                                        1,
                                                    ),
                                                ),
                                            ),
                                        ],
                                    },
                                ),
                                Assign(
                                    Assign {
                                        target: [
                                            Property(
                                                Ident(
                                                    Ident {
                                                        name: "a",
                                                    },
                                                ),
                                                Ident(
                                                    Ident {
                                                        name: "fw",
                                                    },
                                                ),
                                            ),
                                        ],
                                        value: [
                                            Ident(
                                                Ident {
                                                    name: "fw",
                                                },
                                            ),
                                        ],
                                    },
                                ),
                                Assign(
                                    Assign {
                                        target: [
                                            Property(
                                                Ident(
                                                    Ident {
                                                        name: "a",
                                                    },
                                                ),
                                                Ident(
                                                    Ident {
                                                        name: "fh",
                                                    },
                                                ),
                                            ),
                                        ],
                                        value: [
                                            Ident(
                                                Ident {
                                                    name: "fh",
                                                },
                                            ),
                                        ],
                                    },
                                ),
                                Assign(
                                    Assign {
                                        target: [
                                            Property(
                                                Ident(
                                                    Ident {
                                                        name: "a",
                                                    },
                                                ),
                                                Ident(
                                                    Ident {
                                                        name: "playing",
                                                    },
                                                ),
                                            ),
                                        ],
                                        value: [
                                            Literal(
                                                Boolean(
                                                    true,
                                                ),
                                            ),
                                        ],
                                    },
                                ),
                                Assign(
                                    Assign {
                                        target: [
                                            Property(
                                                Ident(
                                                    Ident {
                                                        name: "a",
                                                    },
                                                ),
                                                Ident(
                                                    Ident {
                                                        name: "speed",
                                                    },
                                                ),
                                            ),
                                        ],
                                        value: [
                                            Literal(
                                                Num(
                                                    Int(
                                                        1,
                                                    ),
                                                ),
                                            ),
                                        ],
                                    },
                                ),
                                Assign(
                                    Assign {
                                        target: [
                                            Property(
                                                Ident(
                                                    Ident {
                                                        name: "a",
                                                    },
                                                ),
                                                Ident(
                                                    Ident {
                                                        name: "mode",
                                                    },
                                                ),
                                            ),
                                        ],
                                        value: [
                                            Literal(
                                                Num(
                                                    Int(
                                                        1,
                                                    ),
                                                ),
                                            ),
                                        ],
                                    },
                                ),
                                Assign(
                                    Assign {
                                        target: [
                                            Property(
                                                Ident(
                                                    Ident {
                                                        name: "a",
                                                    },
                                                ),
                                                Ident(
                                                    Ident {
                                                        name: "direction",
                                                    },
                                                ),
                                            ),
                                        ],
                                        value: [
                                            Literal(
                                                Num(
                                                    Int(
                                                        1,
                                                    ),
                                                ),
                                            ),
                                        ],
                                    },
                                ),
                                Declare(
                                    Declare {
                                        declarations: [
                                            Declaration {
                                                name: Ident {
                                                    name: "imgw",
                                                },
                                                is_const: false,
                                                has_finalizer: false,
                                            },
                                        ],
                                        assign: Some(
                                            Assign {
                                                target: [
                                                    Ident(
                                                        Ident {
                                                            name: "imgw",
                                                        },
                                                    ),
                                                ],
                                                value: [
                                                    FunctionCall(
                                                        FunctionCall {
                                                            func: Binary(
                                                                BinaryExpr {
                                                                    op: Method,
                                                                    lhs: Ident(
                                                                        Ident {
                                                                            name: "image",
                                                                        },
                                                                    ),
                                                                    rhs: Ident(
                                                                        Ident {
                                                                            name: "getWidth",
                                                                        },
                                                                    ),
                                                                },
                                                            ),
                                                            args: [],
                                                        },
                                                    ),
                                                ],
                                            },
                                        ),
                                    },
                                ),
                                Declare(
                                    Declare {
                                        declarations: [
                                            Declaration {
                                                name: Ident {
                                                    name: "imgh",
                                                },
                                                is_const: false,
                                                has_finalizer: false,
                                            },
                                        ],
                                        assign: Some(
                                            Assign {
                                                target: [
                                                    Ident(
                                                        Ident {
                                                            name: "imgh",
                                                        },
                                                    ),
                                                ],
                                                value: [
                                                    FunctionCall(
                                                        FunctionCall {
                                                            func: Binary(
                                                                BinaryExpr {
                                                                    op: Method,
                                                                    lhs: Ident(
                                                                        Ident {
                                                                            name: "image",
                                                                        },
                                                                    ),
                                                                    rhs: Ident(
                                                                        Ident {
                                                                            name: "getHeight",
                                                                        },
                                                                    ),
                                                                },
                                                            ),
                                                            args: [],
                                                        },
                                                    ),
                                                ],
                                            },
                                        ),
                                    },
                                ),
                                If(
                                    If {
                                        condition: Binary(
                                            BinaryExpr {
                                                op: Equals,
                                                lhs: Ident(
                                                    Ident {
                                                        name: "frames",
                                                    },
                                                ),
                                                rhs: Literal(
                                                    Num(
                                                        Int(
                                                            0,
                                                        ),
                                                    ),
                                                ),
                                            },
                                        ),
                                        block: [
                                            Assign(
                                                Assign {
                                                    target: [
                                                        Ident(
                                                            Ident {
                                                                name: "frames",
                                                            },
                                                        ),
                                                    ],
                                                    value: [
                                                        Binary(
                                                            BinaryExpr {
                                                                op: Div,
                                                                lhs: Binary(
                                                                    BinaryExpr {
                                                                        op: Mul,
                                                                        lhs: Binary(
                                                                            BinaryExpr {
                                                                                op: Div,
                                                                                lhs: Ident(
                                                                                    Ident {
                                                                                        name: "imgw",
                                                                                    },
                                                                                ),
                                                                                rhs: Ident(
                                                                                    Ident {
                                                                                        name: "fw",
                                                                                    },
                                                                                ),
                                                                            },
                                                                        ),
                                                                        rhs: Ident(
                                                                            Ident {
                                                                                name: "imgh",
                                                                            },
                                                                        ),
                                                                    },
                                                                ),
                                                                rhs: Ident(
                                                                    Ident {
                                                                        name: "fh",
                                                                    },
                                                                ),
                                                            },
                                                        ),
                                                    ],
                                                },
                                            ),
                                        ],
                                        or: None,
                                    },
                                ),
                                Declare(
                                    Declare {
                                        declarations: [
                                            Declaration {
                                                name: Ident {
                                                    name: "rowsize",
                                                },
                                                is_const: false,
                                                has_finalizer: false,
                                            },
                                        ],
                                        assign: Some(
                                            Assign {
                                                target: [
                                                    Ident(
                                                        Ident {
                                                            name: "rowsize",
                                                        },
                                                    ),
                                                ],
                                                value: [
                                                    Binary(
                                                        BinaryExpr {
                                                            op: Div,
                                                            lhs: Ident(
                                                                Ident {
                                                                    name: "imgw",
                                                                },
                                                            ),
                                                            rhs: Ident(
                                                                Ident {
                                                                    name: "fw",
                                                                },
                                                            ),
                                                        },
                                                    ),
                                                ],
                                            },
                                        ),
                                    },
                                ),
                                ForNumeric(
                                    ForNumeric {
                                        variable: Ident {
                                            name: "i",
                                        },
                                        start: Literal(
                                            Num(
                                                Int(
                                                    1,
                                                ),
                                            ),
                                        ),
                                        end: Ident(
                                            Ident {
                                                name: "frames",
                                            },
                                        ),
                                        step: None,
                                        block: [
                                            Declare(
                                                Declare {
                                                    declarations: [
                                                        Declaration {
                                                            name: Ident {
                                                                name: "row",
                                                            },
                                                            is_const: false,
                                                            has_finalizer: false,
                                                        },
                                                    ],
                                                    assign: Some(
                                                        Assign {
                                                            target: [
                                                                Ident(
                                                                    Ident {
                                                                        name: "row",
                                                                    },
                                                                ),
                                                            ],
                                                            value: [
                                                                FunctionCall(
                                                                    FunctionCall {
                                                                        func: Binary(
                                                                            BinaryExpr {
                                                                                op: Property,
                                                                                lhs: Ident(
                                                                                    Ident {
                                                                                        name: "math",
                                                                                    },
                                                                                ),
                                                                                rhs: Ident(
                                                                                    Ident {
                                                                                        name: "floor",
                                                                                    },
                                                                                ),
                                                                            },
                                                                        ),
                                                                        args: [
                                                                            Binary(
                                                                                BinaryExpr {
                                                                                    op: Div,
                                                                                    lhs: Ident(
                                                                                        Ident {
                                                                                            name: "i",
                                                                                        },
                                                                                    ),
                                                                                    rhs: Ident(
                                                                                        Ident {
                                                                                            name: "rowsize",
                                                                                        },
                                                                                    ),
                                                                                },
                                                                            ),
                                                                        ],
                                                                    },
                                                                ),
                                                            ],
                                                        },
                                                    ),
                                                },
                                            ),
                                            Declare(
                                                Declare {
                                                    declarations: [
                                                        Declaration {
                                                            name: Ident {
                                                                name: "column",
                                                            },
                                                            is_const: false,
                                                            has_finalizer: false,
                                                        },
                                                    ],
                                                    assign: Some(
                                                        Assign {
                                                            target: [
                                                                Ident(
                                                                    Ident {
                                                                        name: "column",
                                                                    },
                                                                ),
                                                            ],
                                                            value: [
                                                                Binary(
                                                                    BinaryExpr {
                                                                        op: Mod,
                                                                        lhs: Ident(
                                                                            Ident {
                                                                                name: "i",
                                                                            },
                                                                        ),
                                                                        rhs: Ident(
                                                                            Ident {
                                                                                name: "rowsize",
                                                                            },
                                                                        ),
                                                                    },
                                                                ),
                                                            ],
                                                        },
                                                    ),
                                                },
                                            ),
                                            Declare(
                                                Declare {
                                                    declarations: [
                                                        Declaration {
                                                            name: Ident {
                                                                name: "frame",
                                                            },
                                                            is_const: false,
                                                            has_finalizer: false,
                                                        },
                                                    ],
                                                    assign: Some(
                                                        Assign {
                                                            target: [
                                                                Ident(
                                                                    Ident {
                                                                        name: "frame",
                                                                    },
                                                                ),
                                                            ],
                                                            value: [
                                                                FunctionCall(
                                                                    FunctionCall {
                                                                        func: Binary(
                                                                            BinaryExpr {
                                                                                op: Property,
                                                                                lhs: Ident(
                                                                                    Ident {
                                                                                        name: "love",
                                                                                    },
                                                                                ),
                                                                                rhs: Binary(
                                                                                    BinaryExpr {
                                                                                        op: Property,
                                                                                        lhs: Ident(
                                                                                            Ident {
                                                                                                name: "graphics",
                                                                                            },
                                                                                        ),
                                                                                        rhs: Ident(
                                                                                            Ident {
                                                                                                name: "newQuad",
                                                                                            },
                                                                                        ),
                                                                                    },
                                                                                ),
                                                                            },
                                                                        ),
                                                                        args: [
                                                                            Binary(
                                                                                BinaryExpr {
                                                                                    op: Mul,
                                                                                    lhs: Ident(
                                                                                        Ident {
                                                                                            name: "column",
                                                                                        },
                                                                                    ),
                                                                                    rhs: Ident(
                                                                                        Ident {
                                                                                            name: "fw",
                                                                                        },
                                                                                    ),
                                                                                },
                                                                            ),
                                                                            Binary(
                                                                                BinaryExpr {
                                                                                    op: Mul,
                                                                                    lhs: Ident(
                                                                                        Ident {
                                                                                            name: "row",
                                                                                        },
                                                                                    ),
                                                                                    rhs: Ident(
                                                                                        Ident {
                                                                                            name: "fh",
                                                                                        },
                                                                                    ),
                                                                                },
                                                                            ),
                                                                            Ident(
                                                                                Ident {
                                                                                    name: "fw",
                                                                                },
                                                                            ),
                                                                            Ident(
                                                                                Ident {
                                                                                    name: "fh",
                                                                                },
                                                                            ),
                                                                            Ident(
                                                                                Ident {
                                                                                    name: "imgw",
                                                                                },
                                                                            ),
                                                                            Ident(
                                                                                Ident {
                                                                                    name: "imgh",
                                                                                },
                                                                            ),
                                                                        ],
                                                                    },
                                                                ),
                                                            ],
                                                        },
                                                    ),
                                                },
                                            ),
                                            SimpleExpr(
                                                FunctionCall(
                                                    FunctionCall {
                                                        func: Binary(
                                                            BinaryExpr {
                                                                op: Property,
                                                                lhs: Ident(
                                                                    Ident {
                                                                        name: "table",
                                                                    },
                                                                ),
                                                                rhs: Ident(
                                                                    Ident {
                                                                        name: "insert",
                                                                    },
                                                                ),
                                                            },
                                                        ),
                                                        args: [
                                                            Binary(
                                                                BinaryExpr {
                                                                    op: Property,
                                                                    lhs: Ident(
                                                                        Ident {
                                                                            name: "a",
                                                                        },
                                                                    ),
                                                                    rhs: Ident(
                                                                        Ident {
                                                                            name: "frames",
                                                                        },
                                                                    ),
                                                                },
                                                            ),
                                                            Ident(
                                                                Ident {
                                                                    name: "frame",
                                                                },
                                                            ),
                                                        ],
                                                    },
                                                ),
                                            ),
                                            SimpleExpr(
                                                FunctionCall(
                                                    FunctionCall {
                                                        func: Binary(
                                                            BinaryExpr {
                                                                op: Property,
                                                                lhs: Ident(
                                                                    Ident {
                                                                        name: "table",
                                                                    },
                                                                ),
                                                                rhs: Ident(
                                                                    Ident {
                                                                        name: "insert",
                                                                    },
                                                                ),
                                                            },
                                                        ),
                                                        args: [
                                                            Binary(
                                                                BinaryExpr {
                                                                    op: Property,
                                                                    lhs: Ident(
                                                                        Ident {
                                                                            name: "a",
                                                                        },
                                                                    ),
                                                                    rhs: Ident(
                                                                        Ident {
                                                                            name: "delays",
                                                                        },
                                                                    ),
                                                                },
                                                            ),
                                                            Ident(
                                                                Ident {
                                                                    name: "delay",
                                                                },
                                                            ),
                                                        ],
                                                    },
                                                ),
                                            ),
                                        ],
                                    },
                                ),
                                Return(
                                    Return {
                                        values: [
                                            FunctionCall(
                                                FunctionCall {
                                                    func: Ident(
                                                        Ident {
                                                            name: "setmetatable",
                                                        },
                                                    ),
                                                    args: [
                                                        Ident(
                                                            Ident {
                                                                name: "a",
                                                            },
                                                        ),
                                                        Ident(
                                                            Ident {
                                                                name: "anim_mt",
                                                            },
                                                        ),
                                                    ],
                                                },
                                            ),
                                        ],
                                    },
                                ),
                            ],
                        },
                    ),
                ],
            },
        ),
        Assign(
            Assign {
                target: [
                    Method(
                        Ident(
                            Ident {
                                name: "anim_mt",
                            },
                        ),
                        Ident {
                            name: "update",
                        },
                    ),
                ],
                value: [
                    Function(
                        Function {
                            args: [
                                Ident {
                                    name: "dt",
                                },
                            ],
                            vararg: false,
                            block: [
                                If(
                                    If {
                                        condition: Unary(
                                            UnaryExpr {
                                                op: Not,
                                                expr: Binary(
                                                    BinaryExpr {
                                                        op: Property,
                                                        lhs: Ident(
                                                            Ident {
                                                                name: "self",
                                                            },
                                                        ),
                                                        rhs: Ident(
                                                            Ident {
                                                                name: "playing",
                                                            },
                                                        ),
                                                    },
                                                ),
                                            },
                                        ),
                                        block: [
                                            Return(
                                                Return {
                                                    values: [],
                                                },
                                            ),
                                        ],
                                        or: None,
                                    },
                                ),
                                Assign(
                                    Assign {
                                        target: [
                                            Property(
                                                Ident(
                                                    Ident {
                                                        name: "self",
                                                    },
                                                ),
                                                Ident(
                                                    Ident {
                                                        name: "timer",
                                                    },
                                                ),
                                            ),
                                        ],
                                        value: [
                                            Binary(
                                                BinaryExpr {
                                                    op: Add,
                                                    lhs: Binary(
                                                        BinaryExpr {
                                                            op: Property,
                                                            lhs: Ident(
                                                                Ident {
                                                                    name: "self",
                                                                },
                                                            ),
                                                            rhs: Ident(
                                                                Ident {
                                                                    name: "timer",
                                                                },
                                                            ),
                                                        },
                                                    ),
                                                    rhs: Binary(
                                                        BinaryExpr {
                                                            op: Mul,
                                                            lhs: Ident(
                                                                Ident {
                                                                    name: "dt",
                                                                },
                                                            ),
                                                            rhs: Binary(
                                                                BinaryExpr {
                                                                    op: Property,
                                                                    lhs: Ident(
                                                                        Ident {
                                                                            name: "self",
                                                                        },
                                                                    ),
                                                                    rhs: Ident(
                                                                        Ident {
                                                                            name: "speed",
                                                                        },
                                                                    ),
                                                                },
                                                            ),
                                                        },
                                                    ),
                                                },
                                            ),
                                        ],
                                    },
                                ),
                                If(
                                    If {
                                        condition: Binary(
                                            BinaryExpr {
                                                op: Greater,
                                                lhs: Binary(
                                                    BinaryExpr {
                                                        op: Property,
                                                        lhs: Ident(
                                                            Ident {
                                                                name: "self",
                                                            },
                                                        ),
                                                        rhs: Ident(
                                                            Ident {
                                                                name: "timer",
                                                            },
                                                        ),
                                                    },
                                                ),
                                                rhs: Binary(
                                                    BinaryExpr {
                                                        op: Property,
                                                        lhs: Binary(
                                                            BinaryExpr {
                                                                op: Property,
                                                                lhs: Ident(
                                                                    Ident {
                                                                        name: "self",
                                                                    },
                                                                ),
                                                                rhs: Ident(
                                                                    Ident {
                                                                        name: "delays",
                                                                    },
                                                                ),
                                                            },
                                                        ),
                                                        rhs: Binary(
                                                            BinaryExpr {
                                                                op: Property,
                                                                lhs: Ident(
                                                                    Ident {
                                                                        name: "self",
                                                                    },
                                                                ),
                                                                rhs: Ident(
                                                                    Ident {
                                                                        name: "position",
                                                                    },
                                                                ),
                                                            },
                                                        ),
                                                    },
                                                ),
                                            },
                                        ),
                                        block: [
                                            Assign(
                                                Assign {
                                                    target: [
                                                        Property(
                                                            Ident(
                                                                Ident {
                                                                    name: "self",
                                                                },
                                                            ),
                                                            Ident(
                                                                Ident {
                                                                    name: "timer",
                                                                },
                                                            ),
                                                        ),
                                                    ],
                                                    value: [
                                                        Binary(
                                                            BinaryExpr {
                                                                op: Sub,
                                                                lhs: Binary(
                                                                    BinaryExpr {
                                                                        op: Property,
                                                                        lhs: Ident(
                                                                            Ident {
                                                                                name: "self",
                                                                            },
                                                                        ),
                                                                        rhs: Ident(
                                                                            Ident {
                                                                                name: "timer",
                                                                            },
                                                                        ),
                                                                    },
                                                                ),
                                                                rhs: Binary(
                                                                    BinaryExpr {
                                                                        op: Property,
                                                                        lhs: Binary(
                                                                            BinaryExpr {
                                                                                op: Property,
                                                                                lhs: Ident(
                                                                                    Ident {
                                                                                        name: "self",
                                                                                    },
                                                                                ),
                                                                                rhs: Ident(
                                                                                    Ident {
                                                                                        name: "delays",
                                                                                    },
                                                                                ),
                                                                            },
                                                                        ),
                                                                        rhs: Binary(
                                                                            BinaryExpr {
                                                                                op: Property,
                                                                                lhs: Ident(
                                                                                    Ident {
                                                                                        name: "self",
                                                                                    },
                                                                                ),
                                                                                rhs: Ident(
                                                                                    Ident {
                                                                                        name: "position",
                                                                                    },
                                                                                ),
                                                                            },
                                                                        ),
                                                                    },
                                                                ),
                                                            },
                                                        ),
                                                    ],
                                                },
                                            ),
                                            Assign(
                                                Assign {
                                                    target: [
                                                        Property(
                                                            Ident(
                                                                Ident {
                                                                    name: "self",
                                                                },
                                                            ),
                                                            Ident(
                                                                Ident {
                                                                    name: "position",
                                                                },
                                                            ),
                                                        ),
                                                    ],
                                                    value: [
                                                        Binary(
                                                            BinaryExpr {
                                                                op: Add,
                                                                lhs: Binary(
                                                                    BinaryExpr {
                                                                        op: Property,
                                                                        lhs: Ident(
                                                                            Ident {
                                                                                name: "self",
                                                                            },
                                                                        ),
                                                                        rhs: Ident(
                                                                            Ident {
                                                                                name: "position",
                                                                            },
                                                                        ),
                                                                    },
                                                                ),
                                                                rhs: Binary(
                                                                    BinaryExpr {
                                                                        op: Mul,
                                                                        lhs: Literal(
                                                                            Num(
                                                                                Int(
                                                                                    1,
                                                                                ),
                                                                            ),
                                                                        ),
                                                                        rhs: Binary(
                                                                            BinaryExpr {
                                                                                op: Property,
                                                                                lhs: Ident(
                                                                                    Ident {
                                                                                        name: "self",
                                                                                    },
                                                                                ),
                                                                                rhs: Ident(
                                                                                    Ident {
                                                                                        name: "direction",
                                                                                    },
                                                                                ),
                                                                            },
                                                                        ),
                                                                    },
                                                                ),
                                                            },
                                                        ),
                                                    ],
                                                },
                                            ),
                                            If(
                                                If {
                                                    condition: Binary(
                                                        BinaryExpr {
                                                            op: Greater,
                                                            lhs: Binary(
                                                                BinaryExpr {
                                                                    op: Property,
                                                                    lhs: Ident(
                                                                        Ident {
                                                                            name: "self",
                                                                        },
                                                                    ),
                                                                    rhs: Ident(
                                                                        Ident {
                                                                            name: "position",
                                                                        },
                                                                    ),
                                                                },
                                                            ),
                                                            rhs: Unary(
                                                                UnaryExpr {
                                                                    op: Len,
                                                                    expr: Binary(
                                                                        BinaryExpr {
                                                                            op: Property,
                                                                            lhs: Ident(
                                                                                Ident {
                                                                                    name: "self",
                                                                                },
                                                                            ),
                                                                            rhs: Ident(
                                                                                Ident {
                                                                                    name: "frames",
                                                                                },
                                                                            ),
                                                                        },
                                                                    ),
                                                                },
                                                            ),
                                                        },
                                                    ),
                                                    block: [
                                                        If(
                                                            If {
                                                                condition: Binary(
                                                                    BinaryExpr {
                                                                        op: Equals,
                                                                        lhs: Binary(
                                                                            BinaryExpr {
                                                                                op: Property,
                                                                                lhs: Ident(
                                                                                    Ident {
                                                                                        name: "self",
                                                                                    },
                                                                                ),
                                                                                rhs: Ident(
                                                                                    Ident {
                                                                                        name: "mode",
                                                                                    },
                                                                                ),
                                                                            },
                                                                        ),
                                                                        rhs: Literal(
                                                                            Num(
                                                                                Int(
                                                                                    1,
                                                                                ),
                                                                            ),
                                                                        ),
                                                                    },
                                                                ),
                                                                block: [
                                                                    Assign(
                                                                        Assign {
                                                                            target: [
                                                                                Property(
                                                                                    Ident(
                                                                                        Ident {
                                                                                            name: "self",
                                                                                        },
                                                                                    ),
                                                                                    Ident(
                                                                                        Ident {
                                                                                            name: "position",
                                                                                        },
                                                                                    ),
                                                                                ),
                                                                            ],
                                                                            value: [
                                                                                Literal(
                                                                                    Num(
                                                                                        Int(
                                                                                            1,
                                                                                        ),
                                                                                    ),
                                                                                ),
                                                                            ],
                                                                        },
                                                                    ),
                                                                ],
                                                                or: Some(
                                                                    ElseIf(
                                                                        If {
                                                                            condition: Binary(
                                                                                BinaryExpr {
                                                                                    op: Equals,
                                                                                    lhs: Binary(
                                                                                        BinaryExpr {
                                                                                            op: Property,
                                                                                            lhs: Ident(
                                                                                                Ident {
                                                                                                    name: "self",
                                                                                                },
                                                                                            ),
                                                                                            rhs: Ident(
                                                                                                Ident {
                                                                                                    name: "mode",
                                                                                                },
                                                                                            ),
                                                                                        },
                                                                                    ),
                                                                                    rhs: Literal(
                                                                                        Num(
                                                                                            Int(
                                                                                                2,
                                                                                            ),
                                                                                        ),
                                                                                    ),
                                                                                },
                                                                            ),
                                                                            block: [
                                                                                Assign(
                                                                                    Assign {
                                                                                        target: [
                                                                                            Property(
                                                                                                Ident(
                                                                                                    Ident {
                                                                                                        name: "self",
                                                                                                    },
                                                                                                ),
                                                                                                Ident(
                                                                                                    Ident {
                                                                                                        name: "position",
                                                                                                    },
                                                                                                ),
                                                                                            ),
                                                                                        ],
                                                                                        value: [
                                                                                            Binary(
                                                                                                BinaryExpr {
                                                                                                    op: Sub,
                                                                                                    lhs: Binary(
                                                                                                        BinaryExpr {
                                                                                                            op: Property,
                                                                                                            lhs: Ident(
                                                                                                                Ident {
                                                                                                                    name: "self",
                                                                                                                },
                                                                                                            ),
                                                                                                            rhs: Ident(
                                                                                                                Ident {
                                                                                                                    name: "position",
                                                                                                                },
                                                                                                            ),
                                                                                                        },
                                                                                                    ),
                                                                                                    rhs: Literal(
                                                                                                        Num(
                                                                                                            Int(
                                                                                                                1,
                                                                                                            ),
                                                                                                        ),
                                                                                                    ),
                                                                                                },
                                                                                            ),
                                                                                        ],
                                                                                    },
                                                                                ),
                                                                                SimpleExpr(
                                                                                    FunctionCall(
                                                                                        FunctionCall {
                                                                                            func: Binary(
                                                                                                BinaryExpr {
                                                                                                    op: Method,
                                                                                                    lhs: Ident(
                                                                                                        Ident {
                                                                                                            name: "self",
                                                                                                        },
                                                                                                    ),
                                                                                                    rhs: Ident(
                                                                                                        Ident {
                                                                                                            name: "stop",
                                                                                                        },
                                                                                                    ),
                                                                                                },
                                                                                            ),
                                                                                            args: [],
                                                                                        },
                                                                                    ),
                                                                                ),
                                                                            ],
                                                                            or: Some(
                                                                                ElseIf(
                                                                                    If {
                                                                                        condition: Binary(
                                                                                            BinaryExpr {
                                                                                                op: Equals,
                                                                                                lhs: Binary(
                                                                                                    BinaryExpr {
                                                                                                        op: Property,
                                                                                                        lhs: Ident(
                                                                                                            Ident {
                                                                                                                name: "self",
                                                                                                            },
                                                                                                        ),
                                                                                                        rhs: Ident(
                                                                                                            Ident {
                                                                                                                name: "mode",
                                                                                                            },
                                                                                                        ),
                                                                                                    },
                                                                                                ),
                                                                                                rhs: Literal(
                                                                                                    Num(
                                                                                                        Int(
                                                                                                            3,
                                                                                                        ),
                                                                                                    ),
                                                                                                ),
                                                                                            },
                                                                                        ),
                                                                                        block: [
                                                                                            Assign(
                                                                                                Assign {
                                                                                                    target: [
                                                                                                        Property(
                                                                                                            Ident(
                                                                                                                Ident {
                                                                                                                    name: "self",
                                                                                                                },
                                                                                                            ),
                                                                                                            Ident(
                                                                                                                Ident {
                                                                                                                    name: "direction",
                                                                                                                },
                                                                                                            ),
                                                                                                        ),
                                                                                                    ],
                                                                                                    value: [
                                                                                                        Unary(
                                                                                                            UnaryExpr {
                                                                                                                op: Neg,
                                                                                                                expr: Literal(
                                                                                                                    Num(
                                                                                                                        Int(
                                                                                                                            1,
                                                                                                                        ),
                                                                                                                    ),
                                                                                                                ),
                                                                                                            },
                                                                                                        ),
                                                                                                    ],
                                                                                                },
                                                                                            ),
                                                                                            Assign(
                                                                                                Assign {
                                                                                                    target: [
                                                                                                        Property(
                                                                                                            Ident(
                                                                                                                Ident {
                                                                                                                    name: "self",
                                                                                                                },
                                                                                                            ),
                                                                                                            Ident(
                                                                                                                Ident {
                                                                                                                    name: "position",
                                                                                                                },
                                                                                                            ),
                                                                                                        ),
                                                                                                    ],
                                                                                                    value: [
                                                                                                        Binary(
                                                                                                            BinaryExpr {
                                                                                                                op: Sub,
                                                                                                                lhs: Binary(
                                                                                                                    BinaryExpr {
                                                                                                                        op: Property,
                                                                                                                        lhs: Ident(
                                                                                                                            Ident {
                                                                                                                                name: "self",
                                                                                                                            },
                                                                                                                        ),
                                                                                                                        rhs: Ident(
                                                                                                                            Ident {
                                                                                                                                name: "position",
                                                                                                                            },
                                                                                                                        ),
                                                                                                                    },
                                                                                                                ),
                                                                                                                rhs: Literal(
                                                                                                                    Num(
                                                                                                                        Int(
                                                                                                                            1,
                                                                                                                        ),
                                                                                                                    ),
                                                                                                                ),
                                                                                                            },
                                                                                                        ),
                                                                                                    ],
                                                                                                },
                                                                                            ),
                                                                                        ],
                                                                                        or: None,
                                                                                    },
                                                                                ),
                                                                            ),
                                                                        },
                                                                    ),
                                                                ),
                                                            },
                                                        ),
                                                    ],
                                                    or: Some(
                                                        ElseIf(
                                                            If {
                                                                condition: Binary(
                                                                    BinaryExpr {
                                                                        op: And,
                                                                        lhs: Binary(
                                                                            BinaryExpr {
                                                                                op: Lesser,
                                                                                lhs: Binary(
                                                                                    BinaryExpr {
                                                                                        op: Property,
                                                                                        lhs: Ident(
                                                                                            Ident {
                                                                                                name: "self",
                                                                                            },
                                                                                        ),
                                                                                        rhs: Ident(
                                                                                            Ident {
                                                                                                name: "position",
                                                                                            },
                                                                                        ),
                                                                                    },
                                                                                ),
                                                                                rhs: Literal(
                                                                                    Num(
                                                                                        Int(
                                                                                            1,
                                                                                        ),
                                                                                    ),
                                                                                ),
                                                                            },
                                                                        ),
                                                                        rhs: Binary(
                                                                            BinaryExpr {
                                                                                op: Equals,
                                                                                lhs: Binary(
                                                                                    BinaryExpr {
                                                                                        op: Property,
                                                                                        lhs: Ident(
                                                                                            Ident {
                                                                                                name: "self",
                                                                                            },
                                                                                        ),
                                                                                        rhs: Ident(
                                                                                            Ident {
                                                                                                name: "mode",
                                                                                            },
                                                                                        ),
                                                                                    },
                                                                                ),
                                                                                rhs: Literal(
                                                                                    Num(
                                                                                        Int(
                                                                                            3,
                                                                                        ),
                                                                                    ),
                                                                                ),
                                                                            },
                                                                        ),
                                                                    },
                                                                ),
                                                                block: [
                                                                    Assign(
                                                                        Assign {
                                                                            target: [
                                                                                Property(
                                                                                    Ident(
                                                                                        Ident {
                                                                                            name: "self",
                                                                                        },
                                                                                    ),
                                                                                    Ident(
                                                                                        Ident {
                                                                                            name: "direction",
                                                                                        },
                                                                                    ),
                                                                                ),
                                                                            ],
                                                                            value: [
                                                                                Literal(
                                                                                    Num(
                                                                                        Int(
                                                                                            1,
                                                                                        ),
                                                                                    ),
                                                                                ),
                                                                            ],
                                                                        },
                                                                    ),
                                                                    Assign(
                                                                        Assign {
                                                                            target: [
                                                                                Property(
                                                                                    Ident(
                                                                                        Ident {
                                                                                            name: "self",
                                                                                        },
                                                                                    ),
                                                                                    Ident(
                                                                                        Ident {
                                                                                            name: "position",
                                                                                        },
                                                                                    ),
                                                                                ),
                                                                            ],
                                                                            value: [
                                                                                Binary(
                                                                                    BinaryExpr {
                                                                                        op: Add,
                                                                                        lhs: Binary(
                                                                                            BinaryExpr {
                                                                                                op: Property,
                                                                                                lhs: Ident(
                                                                                                    Ident {
                                                                                                        name: "self",
                                                                                                    },
                                                                                                ),
                                                                                                rhs: Ident(
                                                                                                    Ident {
                                                                                                        name: "position",
                                                                                                    },
                                                                                                ),
                                                                                            },
                                                                                        ),
                                                                                        rhs: Literal(
                                                                                            Num(
                                                                                                Int(
                                                                                                    1,
                                                                                                ),
                                                                                            ),
                                                                                        ),
                                                                                    },
                                                                                ),
                                                                            ],
                                                                        },
                                                                    ),
                                                                ],
                                                                or: None,
                                                            },
                                                        ),
                                                    ),
                                                },
                                            ),
                                        ],
                                        or: None,
                                    },
                                ),
                            ],
                        },
                    ),
                ],
            },
        ),
        Assign(
            Assign {
                target: [
                    Method(
                        Ident(
                            Ident {
                                name: "anim_mt",
                            },
                        ),
                        Ident {
                            name: "draw",
                        },
                    ),
                ],
                value: [
                    Function(
                        Function {
                            args: [
                                Ident {
                                    name: "x",
                                },
                                Ident {
                                    name: "y",
                                },
                                Ident {
                                    name: "angle",
                                },
                                Ident {
                                    name: "sx",
                                },
                                Ident {
                                    name: "sy",
                                },
                            ],
                            vararg: false,
                            block: [
                                SimpleExpr(
                                    FunctionCall(
                                        FunctionCall {
                                            func: Binary(
                                                BinaryExpr {
                                                    op: Property,
                                                    lhs: Binary(
                                                        BinaryExpr {
                                                            op: Property,
                                                            lhs: Ident(
                                                                Ident {
                                                                    name: "love",
                                                                },
                                                            ),
                                                            rhs: Ident(
                                                                Ident {
                                                                    name: "graphics",
                                                                },
                                                            ),
                                                        },
                                                    ),
                                                    rhs: Ident(
                                                        Ident {
                                                            name: "draw",
                                                        },
                                                    ),
                                                },
                                            ),
                                            args: [
                                                Binary(
                                                    BinaryExpr {
                                                        op: Property,
                                                        lhs: Ident(
                                                            Ident {
                                                                name: "self",
                                                            },
                                                        ),
                                                        rhs: Ident(
                                                            Ident {
                                                                name: "img",
                                                            },
                                                        ),
                                                    },
                                                ),
                                                Binary(
                                                    BinaryExpr {
                                                        op: Property,
                                                        lhs: Binary(
                                                            BinaryExpr {
                                                                op: Property,
                                                                lhs: Ident(
                                                                    Ident {
                                                                        name: "self",
                                                                    },
                                                                ),
                                                                rhs: Ident(
                                                                    Ident {
                                                                        name: "frames",
                                                                    },
                                                                ),
                                                            },
                                                        ),
                                                        rhs: Binary(
                                                            BinaryExpr {
                                                                op: Property,
                                                                lhs: Ident(
                                                                    Ident {
                                                                        name: "self",
                                                                    },
                                                                ),
                                                                rhs: Ident(
                                                                    Ident {
                                                                        name: "position",
                                                                    },
                                                                ),
                                                            },
                                                        ),
                                                    },
                                                ),
                                                Ident(
                                                    Ident {
                                                        name: "x",
                                                    },
                                                ),
                                                Ident(
                                                    Ident {
                                                        name: "y",
                                                    },
                                                ),
                                                Ident(
                                                    Ident {
                                                        name: "angle",
                                                    },
                                                ),
                                                Ident(
                                                    Ident {
                                                        name: "sx",
                                                    },
                                                ),
                                                Ident(
                                                    Ident {
                                                        name: "sy",
                                                    },
                                                ),
                                            ],
                                        },
                                    ),
                                ),
                            ],
                        },
                    ),
                ],
            },
        ),
        Assign(
            Assign {
                target: [
                    Method(
                        Ident(
                            Ident {
                                name: "anim_mt",
                            },
                        ),
                        Ident {
                            name: "addFrame",
                        },
                    ),
                ],
                value: [
                    Function(
                        Function {
                            args: [
                                Ident {
                                    name: "x",
                                },
                                Ident {
                                    name: "y",
                                },
                                Ident {
                                    name: "w",
                                },
                                Ident {
                                    name: "h",
                                },
                                Ident {
                                    name: "delay",
                                },
                            ],
                            vararg: false,
                            block: [
                                Declare(
                                    Declare {
                                        declarations: [
                                            Declaration {
                                                name: Ident {
                                                    name: "frame",
                                                },
                                                is_const: false,
                                                has_finalizer: false,
                                            },
                                        ],
                                        assign: Some(
                                            Assign {
                                                target: [
                                                    Ident(
                                                        Ident {
                                                            name: "frame",
                                                        },
                                                    ),
                                                ],
                                                value: [
                                                    FunctionCall(
                                                        FunctionCall {
                                                            func: Binary(
                                                                BinaryExpr {
                                                                    op: Property,
                                                                    lhs: Ident(
                                                                        Ident {
                                                                            name: "love",
                                                                        },
                                                                    ),
                                                                    rhs: Binary(
                                                                        BinaryExpr {
                                                                            op: Property,
                                                                            lhs: Ident(
                                                                                Ident {
                                                                                    name: "graphics",
                                                                                },
                                                                            ),
                                                                            rhs: Ident(
                                                                                Ident {
                                                                                    name: "newQuad",
                                                                                },
                                                                            ),
                                                                        },
                                                                    ),
                                                                },
                                                            ),
                                                            args: [
                                                                Ident(
                                                                    Ident {
                                                                        name: "x",
                                                                    },
                                                                ),
                                                                Ident(
                                                                    Ident {
                                                                        name: "y",
                                                                    },
                                                                ),
                                                                Ident(
                                                                    Ident {
                                                                        name: "w",
                                                                    },
                                                                ),
                                                                Ident(
                                                                    Ident {
                                                                        name: "h",
                                                                    },
                                                                ),
                                                                FunctionCall(
                                                                    FunctionCall {
                                                                        func: Binary(
                                                                            BinaryExpr {
                                                                                op: Property,
                                                                                lhs: Ident(
                                                                                    Ident {
                                                                                        name: "a",
                                                                                    },
                                                                                ),
                                                                                rhs: Binary(
                                                                                    BinaryExpr {
                                                                                        op: Method,
                                                                                        lhs: Ident(
                                                                                            Ident {
                                                                                                name: "img",
                                                                                            },
                                                                                        ),
                                                                                        rhs: Ident(
                                                                                            Ident {
                                                                                                name: "getWidth",
                                                                                            },
                                                                                        ),
                                                                                    },
                                                                                ),
                                                                            },
                                                                        ),
                                                                        args: [],
                                                                    },
                                                                ),
                                                                FunctionCall(
                                                                    FunctionCall {
                                                                        func: Binary(
                                                                            BinaryExpr {
                                                                                op: Property,
                                                                                lhs: Ident(
                                                                                    Ident {
                                                                                        name: "a",
                                                                                    },
                                                                                ),
                                                                                rhs: Binary(
                                                                                    BinaryExpr {
                                                                                        op: Method,
                                                                                        lhs: Ident(
                                                                                            Ident {
                                                                                                name: "img",
                                                                                            },
                                                                                        ),
                                                                                        rhs: Ident(
                                                                                            Ident {
                                                                                                name: "getHeight",
                                                                                            },
                                                                                        ),
                                                                                    },
                                                                                ),
                                                                            },
                                                                        ),
                                                                        args: [],
                                                                    },
                                                                ),
                                                            ],
                                                        },
                                                    ),
                                                ],
                                            },
                                        ),
                                    },
                                ),
                                SimpleExpr(
                                    FunctionCall(
                                        FunctionCall {
                                            func: Binary(
                                                BinaryExpr {
                                                    op: Property,
                                                    lhs: Ident(
                                                        Ident {
                                                            name: "table",
                                                        },
                                                    ),
                                                    rhs: Ident(
                                                        Ident {
                                                            name: "insert",
                                                        },
                                                    ),
                                                },
                                            ),
                                            args: [
                                                Binary(
                                                    BinaryExpr {
                                                        op: Property,
                                                        lhs: Ident(
                                                            Ident {
                                                                name: "self",
                                                            },
                                                        ),
                                                        rhs: Ident(
                                                            Ident {
                                                                name: "frames",
                                                            },
                                                        ),
                                                    },
                                                ),
                                                Ident(
                                                    Ident {
                                                        name: "frame",
                                                    },
                                                ),
                                            ],
                                        },
                                    ),
                                ),
                                SimpleExpr(
                                    FunctionCall(
                                        FunctionCall {
                                            func: Binary(
                                                BinaryExpr {
                                                    op: Property,
                                                    lhs: Ident(
                                                        Ident {
                                                            name: "table",
                                                        },
                                                    ),
                                                    rhs: Ident(
                                                        Ident {
                                                            name: "insert",
                                                        },
                                                    ),
                                                },
                                            ),
                                            args: [
                                                Binary(
                                                    BinaryExpr {
                                                        op: Property,
                                                        lhs: Ident(
                                                            Ident {
                                                                name: "self",
                                                            },
                                                        ),
                                                        rhs: Ident(
                                                            Ident {
                                                                name: "delays",
                                                            },
                                                        ),
                                                    },
                                                ),
                                                Ident(
                                                    Ident {
                                                        name: "delay",
                                                    },
                                                ),
                                            ],
                                        },
                                    ),
                                ),
                            ],
                        },
                    ),
                ],
            },
        ),
        Assign(
            Assign {
                target: [
                    Method(
                        Ident(
                            Ident {
                                name: "anim_mt",
                            },
                        ),
                        Ident {
                            name: "play",
                        },
                    ),
                ],
                value: [
                    Function(
                        Function {
                            args: [],
                            vararg: false,
                            block: [
                                Assign(
                                    Assign {
                                        target: [
                                            Property(
                                                Ident(
                                                    Ident {
                                                        name: "self",
                                                    },
                                                ),
                                                Ident(
                                                    Ident {
                                                        name: "playing",
                                                    },
                                                ),
                                            ),
                                        ],
                                        value: [
                                            Literal(
                                                Boolean(
                                                    true,
                                                ),
                                            ),
                                        ],
                                    },
                                ),
                            ],
                        },
                    ),
                ],
            },
        ),
        Assign(
            Assign {
                target: [
                    Method(
                        Ident(
                            Ident {
                                name: "anim_mt",
                            },
                        ),
                        Ident {
                            name: "stop",
                        },
                    ),
                ],
                value: [
                    Function(
                        Function {
                            args: [],
                            vararg: false,
                            block: [
                                Assign(
                                    Assign {
                                        target: [
                                            Property(
                                                Ident(
                                                    Ident {
                                                        name: "self",
                                                    },
                                                ),
                                                Ident(
                                                    Ident {
                                                        name: "playing",
                                                    },
                                                ),
                                            ),
                                        ],
                                        value: [
                                            Literal(
                                                Boolean(
                                                    false,
                                                ),
                                            ),
                                        ],
                                    },
                                ),
                            ],
                        },
                    ),
                ],
            },
        ),
        Assign(
            Assign {
                target: [
                    Method(
                        Ident(
                            Ident {
                                name: "anim_mt",
                            },
                        ),
                        Ident {
                            name: "reset",
                        },
                    ),
                ],
                value: [
                    Function(
                        Function {
                            args: [],
                            vararg: false,
                            block: [
                                SimpleExpr(
                                    FunctionCall(
                                        FunctionCall {
                                            func: Binary(
                                                BinaryExpr {
                                                    op: Method,
                                                    lhs: Ident(
                                                        Ident {
                                                            name: "self",
                                                        },
                                                    ),
                                                    rhs: Ident(
                                                        Ident {
                                                            name: "seek",
                                                        },
                                                    ),
                                                },
                                            ),
                                            args: [
                                                Literal(
                                                    Num(
                                                        Int(
                                                            0,
                                                        ),
                                                    ),
                                                ),
                                            ],
                                        },
                                    ),
                                ),
                            ],
                        },
                    ),
                ],
            },
        ),
        Assign(
            Assign {
                target: [
                    Method(
                        Ident(
                            Ident {
                                name: "anim_mt",
                            },
                        ),
                        Ident {
                            name: "seek",
                        },
                    ),
                ],
                value: [
                    Function(
                        Function {
                            args: [
                                Ident {
                                    name: "frame",
                                },
                            ],
                            vararg: false,
                            block: [
                                Assign(
                                    Assign {
                                        target: [
                                            Property(
                                                Ident(
                                                    Ident {
                                                        name: "self",
                                                    },
                                                ),
                                                Ident(
                                                    Ident {
                                                        name: "position",
                                                    },
                                                ),
                                            ),
                                        ],
                                        value: [
                                            Ident(
                                                Ident {
                                                    name: "frame",
                                                },
                                            ),
                                        ],
                                    },
                                ),
                                Assign(
                                    Assign {
                                        target: [
                                            Property(
                                                Ident(
                                                    Ident {
                                                        name: "self",
                                                    },
                                                ),
                                                Ident(
                                                    Ident {
                                                        name: "timer",
                                                    },
                                                ),
                                            ),
                                        ],
                                        value: [
                                            Literal(
                                                Num(
                                                    Int(
                                                        0,
                                                    ),
                                                ),
                                            ),
                                        ],
                                    },
                                ),
                            ],
                        },
                    ),
                ],
            },
        ),
        Assign(
            Assign {
                target: [
                    Method(
                        Ident(
                            Ident {
                                name: "anim_mt",
                            },
                        ),
                        Ident {
                            name: "getCurrentFrame",
                        },
                    ),
                ],
                value: [
                    Function(
                        Function {
                            args: [],
                            vararg: false,
                            block: [
                                Return(
                                    Return {
                                        values: [
                                            Binary(
                                                BinaryExpr {
                                                    op: Property,
                                                    lhs: Ident(
                                                        Ident {
                                                            name: "self",
                                                        },
                                                    ),
                                                    rhs: Ident(
                                                        Ident {
                                                            name: "position",
                                                        },
                                                    ),
                                                },
                                            ),
                                        ],
                                    },
                                ),
                            ],
                        },
                    ),
                ],
            },
        ),
        Assign(
            Assign {
                target: [
                    Method(
                        Ident(
                            Ident {
                                name: "anim_mt",
                            },
                        ),
                        Ident {
                            name: "getSize",
                        },
                    ),
                ],
                value: [
                    Function(
                        Function {
                            args: [],
                            vararg: false,
                            block: [
                                Return(
                                    Return {
                                        values: [
                                            Unary(
                                                UnaryExpr {
                                                    op: Len,
                                                    expr: Binary(
                                                        BinaryExpr {
                                                            op: Property,
                                                            lhs: Ident(
                                                                Ident {
                                                                    name: "self",
                                                                },
                                                            ),
                                                            rhs: Ident(
                                                                Ident {
                                                                    name: "frames",
                                                                },
                                                            ),
                                                        },
                                                    ),
                                                },
                                            ),
                                        ],
                                    },
                                ),
                            ],
                        },
                    ),
                ],
            },
        ),
        Assign(
            Assign {
                target: [
                    Method(
                        Ident(
                            Ident {
                                name: "anim_mt",
                            },
                        ),
                        Ident {
                            name: "setDelay",
                        },
                    ),
                ],
                value: [
                    Function(
                        Function {
                            args: [
                                Ident {
                                    name: "frame",
                                },
                                Ident {
                                    name: "delay",
                                },
                            ],
                            vararg: false,
                            block: [
                                Assign(
                                    Assign {
                                        target: [
                                            Property(
                                                Property(
                                                    Ident(
                                                        Ident {
                                                            name: "self",
                                                        },
                                                    ),
                                                    Ident(
                                                        Ident {
                                                            name: "delays",
                                                        },
                                                    ),
                                                ),
                                                Ident(
                                                    Ident {
                                                        name: "frame",
                                                    },
                                                ),
                                            ),
                                        ],
                                        value: [
                                            Ident(
                                                Ident {
                                                    name: "delay",
                                                },
                                            ),
                                        ],
                                    },
                                ),
                            ],
                        },
                    ),
                ],
            },
        ),
        Assign(
            Assign {
                target: [
                    Method(
                        Ident(
                            Ident {
                                name: "anim_mt",
                            },
                        ),
                        Ident {
                            name: "setSpeed",
                        },
                    ),
                ],
                value: [
                    Function(
                        Function {
                            args: [
                                Ident {
                                    name: "speed",
                                },
                            ],
                            vararg: false,
                            block: [
                                Assign(
                                    Assign {
                                        target: [
                                            Property(
                                                Ident(
                                                    Ident {
                                                        name: "self",
                                                    },
                                                ),
                                                Ident(
                                                    Ident {
                                                        name: "speed",
                                                    },
                                                ),
                                            ),
                                        ],
                                        value: [
                                            Ident(
                                                Ident {
                                                    name: "speed",
                                                },
                                            ),
                                        ],
                                    },
                                ),
                            ],
                        },
                    ),
                ],
            },
        ),
        Assign(
            Assign {
                target: [
                    Method(
                        Ident(
                            Ident {
                                name: "anim_mt",
                            },
                        ),
                        Ident {
                            name: "getWidth",
                        },
                    ),
                ],
                value: [
                    Function(
                        Function {
                            args: [],
                            vararg: false,
                            block: [
                                Return(
                                    Return {
                                        values: [
                                            FunctionCall(
                                                FunctionCall {
                                                    func: Binary(
                                                        BinaryExpr {
                                                            op: Method,
                                                            lhs: Binary(
                                                                BinaryExpr {
                                                                    op: Property,
                                                                    lhs: Binary(
                                                                        BinaryExpr {
                                                                            op: Property,
                                                                            lhs: Ident(
                                                                                Ident {
                                                                                    name: "self",
                                                                                },
                                                                            ),
                                                                            rhs: Ident(
                                                                                Ident {
                                                                                    name: "frames",
                                                                                },
                                                                            ),
                                                                        },
                                                                    ),
                                                                    rhs: Binary(
                                                                        BinaryExpr {
                                                                            op: Property,
                                                                            lhs: Ident(
                                                                                Ident {
                                                                                    name: "self",
                                                                                },
                                                                            ),
                                                                            rhs: Ident(
                                                                                Ident {
                                                                                    name: "position",
                                                                                },
                                                                            ),
                                                                        },
                                                                    ),
                                                                },
                                                            ),
                                                            rhs: Ident(
                                                                Ident {
                                                                    name: "getWidth",
                                                                },
                                                            ),
                                                        },
                                                    ),
                                                    args: [],
                                                },
                                            ),
                                        ],
                                    },
                                ),
                            ],
                        },
                    ),
                ],
            },
        ),
        Assign(
            Assign {
                target: [
                    Method(
                        Ident(
                            Ident {
                                name: "anim_mt",
                            },
                        ),
                        Ident {
                            name: "getHeight",
                        },
                    ),
                ],
                value: [
                    Function(
                        Function {
                            args: [],
                            vararg: false,
                            block: [
                                Return(
                                    Return {
                                        values: [
                                            FunctionCall(
                                                FunctionCall {
                                                    func: Binary(
                                                        BinaryExpr {
                                                            op: Method,
                                                            lhs: Binary(
                                                                BinaryExpr {
                                                                    op: Property,
                                                                    lhs: Binary(
                                                                        BinaryExpr {
                                                                            op: Property,
                                                                            lhs: Ident(
                                                                                Ident {
                                                                                    name: "self",
                                                                                },
                                                                            ),
                                                                            rhs: Ident(
                                                                                Ident {
                                                                                    name: "frames",
                                                                                },
                                                                            ),
                                                                        },
                                                                    ),
                                                                    rhs: Binary(
                                                                        BinaryExpr {
                                                                            op: Property,
                                                                            lhs: Ident(
                                                                                Ident {
                                                                                    name: "self",
                                                                                },
                                                                            ),
                                                                            rhs: Ident(
                                                                                Ident {
                                                                                    name: "position",
                                                                                },
                                                                            ),
                                                                        },
                                                                    ),
                                                                },
                                                            ),
                                                            rhs: Ident(
                                                                Ident {
                                                                    name: "getHeight",
                                                                },
                                                            ),
                                                        },
                                                    ),
                                                    args: [],
                                                },
                                            ),
                                        ],
                                    },
                                ),
                            ],
                        },
                    ),
                ],
            },
        ),
        Assign(
            Assign {
                target: [
                    Method(
                        Ident(
                            Ident {
                                name: "anim_mt",
                            },
                        ),
                        Ident {
                            name: "setMode",
                        },
                    ),
                ],
                value: [
                    Function(
                        Function {
                            args: [
                                Ident {
                                    name: "mode",
                                },
                            ],
                            vararg: false,
                            block: [
                                If(
                                    If {
                                        condition: Binary(
                                            BinaryExpr {
                                                op: Equals,
                                                lhs: Ident(
                                                    Ident {
                                                        name: "mode",
                                                    },
                                                ),
                                                rhs: Literal(
                                                    String(
                                                        [
                                                            108,
                                                            111,
                                                            111,
                                                            112,
                                                        ],
                                                    ),
                                                ),
                                            },
                                        ),
                                        block: [
                                            Assign(
                                                Assign {
                                                    target: [
                                                        Property(
                                                            Ident(
                                                                Ident {
                                                                    name: "self",
                                                                },
                                                            ),
                                                            Ident(
                                                                Ident {
                                                                    name: "mode",
                                                                },
                                                            ),
                                                        ),
                                                    ],
                                                    value: [
                                                        Literal(
                                                            Num(
                                                                Int(
                                                                    1,
                                                                ),
                                                            ),
                                                        ),
                                                    ],
                                                },
                                            ),
                                        ],
                                        or: Some(
                                            ElseIf(
                                                If {
                                                    condition: Binary(
                                                        BinaryExpr {
                                                            op: Equals,
                                                            lhs: Ident(
                                                                Ident {
                                                                    name: "mode",
                                                                },
                                                            ),
                                                            rhs: Literal(
                                                                String(
                                                                    [
                                                                        111,
                                                                        110,
                                                                        99,
                                                                        101,
                                                                    ],
                                                                ),
                                                            ),
                                                        },
                                                    ),
                                                    block: [
                                                        Assign(
                                                            Assign {
                                                                target: [
                                                                    Property(
                                                                        Ident(
                                                                            Ident {
                                                                                name: "self",
                                                                            },
                                                                        ),
                                                                        Ident(
                                                                            Ident {
                                                                                name: "mode",
                                                                            },
                                                                        ),
                                                                    ),
                                                                ],
                                                                value: [
                                                                    Literal(
                                                                        Num(
                                                                            Int(
                                                                                2,
                                                                            ),
                                                                        ),
                                                                    ),
                                                                ],
                                                            },
                                                        ),
                                                    ],
                                                    or: Some(
                                                        ElseIf(
                                                            If {
                                                                condition: Binary(
                                                                    BinaryExpr {
                                                                        op: Equals,
                                                                        lhs: Ident(
                                                                            Ident {
                                                                                name: "mode",
                                                                            },
                                                                        ),
                                                                        rhs: Literal(
                                                                            String(
                                                                                [
                                                                                    98,
                                                                                    111,
                                                                                    117,
                                                                                    110,
                                                                                    99,
                                                                                    101,
                                                                                ],
                                                                            ),
                                                                        ),
                                                                    },
                                                                ),
                                                                block: [
                                                                    Assign(
                                                                        Assign {
                                                                            target: [
                                                                                Property(
                                                                                    Ident(
                                                                                        Ident {
                                                                                            name: "self",
                                                                                        },
                                                                                    ),
                                                                                    Ident(
                                                                                        Ident {
                                                                                            name: "mode",
                                                                                        },
                                                                                    ),
                                                                                ),
                                                                            ],
                                                                            value: [
                                                                                Literal(
                                                                                    Num(
                                                                                        Int(
                                                                                            3,
                                                                                        ),
                                                                                    ),
                                                                                ),
                                                                            ],
                                                                        },
                                                                    ),
                                                                ],
                                                                or: None,
                                                            },
                                                        ),
                                                    ),
                                                },
                                            ),
                                        ),
                                    },
                                ),
                            ],
                        },
                    ),
                ],
            },
        ),
        If(
            If {
                condition: Ident(
                    Ident {
                        name: "Animations_legacy_support",
                    },
                ),
                block: [
                    Assign(
                        Assign {
                            target: [
                                Property(
                                    Property(
                                        Ident(
                                            Ident {
                                                name: "love",
                                            },
                                        ),
                                        Ident(
                                            Ident {
                                                name: "graphics",
                                            },
                                        ),
                                    ),
                                    Ident(
                                        Ident {
                                            name: "newAnimation",
                                        },
                                    ),
                                ),
                            ],
                            value: [
                                Ident(
                                    Ident {
                                        name: "newAnimation",
                                    },
                                ),
                            ],
                        },
                    ),
                    Declare(
                        Declare {
                            declarations: [
                                Declaration {
                                    name: Ident {
                                        name: "oldLGDraw",
                                    },
                                    is_const: false,
                                    has_finalizer: false,
                                },
                            ],
                            assign: Some(
                                Assign {
                                    target: [
                                        Ident(
                                            Ident {
                                                name: "oldLGDraw",
                                            },
                                        ),
                                    ],
                                    value: [
                                        Binary(
                                            BinaryExpr {
                                                op: Property,
                                                lhs: Ident(
                                                    Ident {
                                                        name: "love",
                                                    },
                                                ),
                                                rhs: Binary(
                                                    BinaryExpr {
                                                        op: Property,
                                                        lhs: Ident(
                                                            Ident {
                                                                name: "graphics",
                                                            },
                                                        ),
                                                        rhs: Ident(
                                                            Ident {
                                                                name: "draw",
                                                            },
                                                        ),
                                                    },
                                                ),
                                            },
                                        ),
                                    ],
                                },
                            ),
                        },
                    ),
                    Assign(
                        Assign {
                            target: [
                                Property(
                                    Property(
                                        Ident(
                                            Ident {
                                                name: "love",
                                            },
                                        ),
                                        Ident(
                                            Ident {
                                                name: "graphics",
                                            },
                                        ),
                                    ),
                                    Ident(
                                        Ident {
                                            name: "draw",
                                        },
                                    ),
                                ),
                            ],
                            value: [
                                Function(
                                    Function {
                                        args: [
                                            Ident {
                                                name: "item",
                                            },
                                        ],
                                        vararg: true,
                                        block: [
                                            If(
                                                If {
                                                    condition: Binary(
                                                        BinaryExpr {
                                                            op: And,
                                                            lhs: Binary(
                                                                BinaryExpr {
                                                                    op: Equals,
                                                                    lhs: FunctionCall(
                                                                        FunctionCall {
                                                                            func: Ident(
                                                                                Ident {
                                                                                    name: "type",
                                                                                },
                                                                            ),
                                                                            args: [
                                                                                Ident(
                                                                                    Ident {
                                                                                        name: "item",
                                                                                    },
                                                                                ),
                                                                            ],
                                                                        },
                                                                    ),
                                                                    rhs: Literal(
                                                                        String(
                                                                            [
                                                                                116,
                                                                                97,
                                                                                98,
                                                                                108,
                                                                                101,
                                                                            ],
                                                                        ),
                                                                    ),
                                                                },
                                                            ),
                                                            rhs: Binary(
                                                                BinaryExpr {
                                                                    op: Property,
                                                                    lhs: Ident(
                                                                        Ident {
                                                                            name: "item",
                                                                        },
                                                                    ),
                                                                    rhs: Ident(
                                                                        Ident {
                                                                            name: "draw",
                                                                        },
                                                                    ),
                                                                },
                                                            ),
                                                        },
                                                    ),
                                                    block: [
                                                        SimpleExpr(
                                                            FunctionCall(
                                                                FunctionCall {
                                                                    func: Binary(
                                                                        BinaryExpr {
                                                                            op: Method,
                                                                            lhs: Ident(
                                                                                Ident {
                                                                                    name: "item",
                                                                                },
                                                                            ),
                                                                            rhs: Ident(
                                                                                Ident {
                                                                                    name: "draw",
                                                                                },
                                                                            ),
                                                                        },
                                                                    ),
                                                                    args: [
                                                                        VarArg,
                                                                    ],
                                                                },
                                                            ),
                                                        ),
                                                    ],
                                                    or: Some(
                                                        Else(
                                                            [
                                                                SimpleExpr(
                                                                    FunctionCall(
                                                                        FunctionCall {
                                                                            func: Ident(
                                                                                Ident {
                                                                                    name: "oldLGDraw",
                                                                                },
                                                                            ),
                                                                            args: [
                                                                                Ident(
                                                                                    Ident {
                                                                                        name: "item",
                                                                                    },
                                                                                ),
                                                                                VarArg,
                                                                            ],
                                                                        },
                                                                    ),
                                                                ),
                                                            ],
                                                        ),
                                                    ),
                                                },
                                            ),
                                        ],
                                    },
                                ),
                            ],
                        },
                    ),
                ],
                or: None,
            },
        ),
    ],
}
